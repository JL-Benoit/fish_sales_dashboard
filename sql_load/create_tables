-- Create all the tables necessary

-- Create client table with primary key
CREATE TABLE public.client
(
    client_id INT PRIMARY KEY,
    code_magasin VARCHAR(255),
    addresse VARCHAR(255),
    code_postal VARCHAR(255),
    email VARCHAR(255),
    FOREIGN KEY (commercial_id) REFERENCES public.commercial (commercial_id),
    FOREIGN KEY (livraison_id) REFERENCES public.livraison (livraison_id)
);

-- Create commercial table with primary key
CREATE TABLE public.commercial
(
    commercial_id INT PRIMARY KEY,
    prenom VARCHAR (255),
    nom VARCHAR(255),
    FOREIGN KEY (region_id) REFERENCES public.region (region_id)
);

-- Create livraison table with primary key
CREATE TABLE public.livraison
(
    livraison_id INT PRIMARY KEY,
    livraison VARCHAR (25)
);

-- Create region table with primary key
CREATE TABLE public.region
(
    region_id INT PRIMARY KEY,
    region VARCHAR (255)
);

-- Create commande table with primary key
CREATE TABLE public.commande
(
    commande_id INT PRIMARY KEY,
    date_commande DATE,
    FOREIGN KEY (client_id) REFERENCES public.client (client_id),
    FOREIGN KEY (commercial_id) REFERENCES public.client (commercial_id),
    FOREIGN KEY (livraison_id) REFERENCES public.client (livraison_id)
);

-- Create commande detail table with primary key
CREATE TABLE public.commande_detail
(
    commande_detail_id INT PRIMARY KEY,
    quantite INT,
    prix_unitaire NUMBER,
    remise NUMBER,
    prix_total NUMBER,
    FOREIGN KEY (commande_id) REFERENCES public.commande (commande_id),
    FOREIGN KEY (produit_id) REFERENCES public.produit (produit_id)
);

-- Create product table with primary key
CREATE TABLE public.produit
(
    produit_id INT PRIMARY KEY,
    nom_produit VARCHAR(255),
    nom_scientifique VARCHAR(255),
    prix NUMBER,
    FOREIGN KEY (sous_categorie_id) REFERENCES public.sous_categorie (sous_categorie_id)
);

-- Create sub category table with primary key
CREATE TABLE public.sous_categorie
(
    sous_categorie_id INT PRIMARY KEY,
    sous_categorie VARCHAR(255),
    FOREIGN KEY (categorie_id) REFERENCES public.categorie (categorie_id)
);

-- Create category table with primary key
CREATE TABLE public.categorie
(
    categorie_id INT PRIMARY KEY,
    categorie VARCHAR(255)
);


-- Set ownership of the tables to the postgres user
ALTER TABLE public.client OWNER to postgres;
ALTER TABLE public.commercial OWNER to postgres;
ALTER TABLE public.livraison OWNER to postgres;
ALTER TABLE public.region OWNER to postgres;
ALTER TABLE public.commande OWNER to postgres;
ALTER TABLE public.commande_detail OWNER to postgres;
ALTER TABLE public.produit OWNER to postgres;
ALTER TABLE public.sous_categorie OWNER to postgres;
ALTER TABLE public.categorie OWNER to postgres;